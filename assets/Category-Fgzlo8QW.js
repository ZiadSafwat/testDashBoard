import{r as m,j as e,y as g,u as $}from"./index-CXq9JogT.js";import{a as y}from"./index-Dq7h7Pqt.js";/* empty css                             */import{o as N,p as S,q as k,T as u,r as I,B as C}from"./DefaultLayout-BHz2fNpR.js";import"./Widgets-BECJ0cVn.js";const O=({open:j,onClose:c,onSave:f,initialData:s})=>{const[t,l]=m.useState({nameEn:"",nameAr:"",descriptionEn:"",descriptionAr:"",status:""});m.useEffect(()=>{s&&l({id:s.id||"",nameEn:s.nameEn||"",nameAr:s.nameAr||"",descriptionEn:s.description||"",descriptionAr:s.descriptionAr||"",status:s.isActive?"true":"false",image:null})},[s]);const r=n=>{const{name:o,value:i,type:h,files:x}=n.target;l(p=>({...p,[o]:h==="file"?x[0]:i}))},A=async()=>{var n;if(t.nameEn)try{const o=sessionStorage.getItem("token"),i=new FormData;if(t.image&&t.image instanceof File)i.append("Image",t.image);else{g.error("Please upload a valid image");return}i.append("Name",t.nameEn),i.append("NameAr",t.nameAr),i.append("Description",t.descriptionEn||""),i.append("DescriptionAr",t.descriptionAr||""),i.append("IsActive",t.status);const h=await y.post("http://test.smartsto0re.shop/api/Categories",i,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${o}`}});g.success("Catagory added successfully!"),console.log(h.data),f(h.data),c()}catch(o){console.error("❌ Error Response:",((n=o.response)==null?void 0:n.data)||o.message),g.error("Failed to add Catagory. Check required fields.")}else g.error("Please fill required fields")};return e.jsxs(N,{open:j,onClose:c,children:[e.jsx(S,{children:"Add New Catagory"}),e.jsxs(k,{children:[e.jsx(u,{label:"Catagory Name Arabic",name:"nameAr",fullWidth:!0,margin:"dense",value:t.nameAr,onChange:r}),e.jsx(u,{label:"Catagory Name English",name:"nameEn",fullWidth:!0,margin:"dense",value:t.nameEn,onChange:r}),e.jsx(u,{className:"mt-4",label:"Upload Image",type:"file",name:"image",fullWidth:!0,margin:"dense",onChange:r,InputLabelProps:{shrink:!0}}),e.jsx(u,{label:"Description English",name:"descriptionEn",fullWidth:!0,margin:"dense",multiline:!0,rows:4,value:t.descriptionEn,onChange:r}),e.jsx(u,{label:"Description Arabic",name:"descriptionAr",fullWidth:!0,margin:"dense",multiline:!0,rows:4,value:t.descriptionAr,onChange:r}),e.jsxs(u,{select:!0,label:"Select status",name:"status",fullWidth:!0,margin:"normal",value:t.status,onChange:n=>{const o=n.target.value==="true";l(i=>({...i,status:o}))},SelectProps:{native:!0},children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]}),e.jsxs(I,{children:[e.jsx(C,{onClick:c,children:"Cancel"}),e.jsx(C,{onClick:A,variant:"contained",children:"Add"})]})]})},U=({open:j,onClose:c,onSave:f,productData:s})=>{const[t,l]=m.useState({nameEn:"",nameAr:"",descriptionEn:"",descriptionAr:"",image:null,imageUrl:"",status:"true"});m.useEffect(()=>{s&&(console.log(s,"productData"),l({nameEn:s.name||"",nameAr:s.nameAr||"",descriptionEn:s.description||"",descriptionAr:s.descriptionAr||"",image:null,imageUrl:s.imageUrl||"",status:s.isActive?"true":"false",id:s.id}))},[s]);const r=n=>{const{name:o,value:i,type:h,files:x}=n.target;l(h==="file"?p=>({...p,[o]:x[0]}):p=>({...p,[o]:i}))},A=async()=>{if(t.nameEn)try{const n=new FormData;n.append("Name",t.nameEn),n.append("NameAr",t.nameAr),n.append("Description",t.descriptionEn||""),n.append("DescriptionAr",t.descriptionAr||""),n.append("IsActive",t.status),t.image instanceof File&&n.append("Image",t.image);const o=sessionStorage.getItem("token"),i=await y.put(`http://test.smartsto0re.shop/api/Categories/${s.id}`,n,{headers:{Authorization:`Bearer ${o}`}});g.success("Catagory updated successfully"),f(i.data),c()}catch(n){console.error(n),g.error("Error updating Catagory")}else g.error("Please fill required fields")};return e.jsxs(N,{open:j,onClose:c,fullWidth:!0,maxWidth:"sm",children:[e.jsx(S,{children:"Edit Catagory"}),e.jsxs(k,{children:[e.jsx(u,{label:"Catagory Name Arabic",name:"nameAr",fullWidth:!0,margin:"dense",value:t.nameAr,onChange:r}),e.jsx(u,{label:"Catagory Name English",name:"nameEn",fullWidth:!0,margin:"dense",value:t.nameEn,onChange:r}),t.imageUrl&&e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("img",{src:`http://test.smartsto0re.shop${t.imageUrl}`,alt:"Category",style:{width:"100px",borderRadius:"6px",objectFit:"cover"}})}),e.jsx("label",{style:{display:"block",marginTop:"1rem"},children:"Upload New Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:r,style:{marginBottom:"1rem"}}),e.jsx(u,{label:"Description English",name:"descriptionEn",fullWidth:!0,margin:"dense",multiline:!0,rows:2,value:t.descriptionEn,onChange:r}),e.jsx(u,{label:"Description Arabic",name:"descriptionAr",fullWidth:!0,margin:"dense",multiline:!0,rows:2,value:t.descriptionAr,onChange:r}),e.jsxs(u,{select:!0,label:"Status",name:"status",fullWidth:!0,margin:"normal",value:t.status,onChange:r,SelectProps:{native:!0},children:[e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]}),e.jsxs(I,{children:[e.jsx(C,{onClick:c,children:"Cancel"}),e.jsx(C,{variant:"contained",onClick:A,children:"Save Changes"})]})]})},T=({open:j,onClose:c,onConfirm:f,Catagory:s})=>{console.log(s);const t=async()=>{try{const l=sessionStorage.getItem("token");console.log(s.id,"cgchgchgch"),console.log("hvjhvchjvhvkhvhjcvhchch");const r=await y.delete(`http://test.smartsto0re.shop/api/Categories/${s.id}`,{headers:{Authorization:`Bearer ${l}`}});g.success("Brand deleted successfully"),f(s.id),c()}catch(l){console.error("❌ Error deleting Catagory:",l),g.error(l.message)}};return e.jsxs(N,{open:j,onClose:c,className:"delete-dialog",children:[e.jsx(S,{children:"Confirm Deletion"}),e.jsxs(k,{children:["Are you sure you want to delete ",e.jsx("strong",{children:(s==null?void 0:s.name)||"this Catagory"}),"?"]}),e.jsxs(I,{children:[e.jsx(C,{onClick:c,color:"inherit",children:"Cancel"}),e.jsx(C,{onClick:t,color:"error",variant:"contained",children:"Delete"})]})]})};function _(){$();const[j,c]=m.useState(!1),[f,s]=m.useState(!1),[t,l]=m.useState(!1),[r,A]=m.useState(null),[n,o]=m.useState(null),[i,h]=m.useState([]),[x,p]=m.useState(1),E=5,b=Math.ceil(i.length/E),B=x*E,w=B-E,D=i.slice(w,B);m.useEffect(()=>{(async()=>{try{const d=sessionStorage.getItem("token"),v=await y.get("http://test.smartsto0re.shop/api/Categories",{headers:{Authorization:`Bearer ${d}`}});h(v.data.data)}catch(d){console.error("❌ Error fetching catagories:",d),g.error("Failed to bring the categories.")}})()},[]);const W=a=>{h(d=>[...d,a])},P=a=>{h(d=>d.map(v=>v.id===a.id?a:v))},F=a=>{h(d=>d.filter(v=>v.id!==a)),l(!1),A(null)};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"header",children:[e.jsx("p",{children:"Add a New Category"}),e.jsx(C,{variant:"contained",color:"primary",onClick:()=>c(!0),children:"Add Category"})]}),e.jsxs("table",{className:"Catagory_table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Image"}),e.jsx("th",{children:"NameEn"}),e.jsx("th",{children:"NameAr"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Edit"}),e.jsx("th",{children:"Delete"})]})}),e.jsx("tbody",{children:D.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{className:"image",src:`http://test.smartsto0re.shop${a.imageUrl}`,alt:a.name})}),e.jsx("td",{children:a.name}),e.jsx("td",{children:a.nameAr}),e.jsx("td",{children:e.jsx("span",{className:a.isActive?"active":"inactive",children:a.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsx("button",{className:"button editButton",onClick:()=>{o(a),s(!0)},children:e.jsx("i",{className:"fas fa-edit"})})}),e.jsx("td",{children:e.jsx("button",{className:"button deleteButton",onClick:()=>{A(a),l(!0)},children:e.jsx("i",{className:"fas fa-trash"})})})]},a.id))})]}),e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"pageBtn",onClick:()=>p(a=>Math.max(a-1,1)),disabled:x===1,children:"<<"}),[...Array(b)].map((a,d)=>e.jsx("button",{className:`pageBtn ${x===d+1?"pageBtnActive":"pageBtnInactive"}`,onClick:()=>p(d+1),children:d+1},d)),e.jsx("button",{className:"pageBtn",onClick:()=>p(a=>Math.min(a+1,b)),disabled:x===b,children:">"})]}),e.jsx(O,{open:j,onClose:()=>c(!1),onSave:W}),e.jsx(U,{open:f,onClose:()=>s(!1),onSave:P,productData:n}),e.jsx(T,{open:t,className:"delete-dialog",onClose:()=>l(!1),onConfirm:()=>F(r==null?void 0:r.id),Catagory:r})]})}export{_ as default};
