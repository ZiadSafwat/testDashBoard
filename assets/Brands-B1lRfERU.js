import{r as u,j as e,y as x,u as O}from"./index-BiwlAwvd.js";import{a as E}from"./index-Dq7h7Pqt.js";import{o as b,p as y,q as N,T as h,r as k,B as v}from"./DefaultLayout-FA1RpTy5.js";/* empty css                             */import"./Widgets-BFo5Sf5A.js";const T=({open:p,onClose:d,onSave:g,initialData:s})=>{const[t,i]=u.useState({nameEn:"",nameAr:"",descriptionEn:"",descriptionAr:"",status:""});u.useEffect(()=>{s&&i({id:s.id||"",nameEn:s.name||"",nameAr:s.nameAr||"",descriptionEn:s.description||"",descriptionAr:s.descriptionAr||"",status:s.isActive?"true":"false",image:null})},[s]);const l=m=>{const{name:n,value:r,type:c,files:j}=m.target;i(f=>({...f,[n]:c==="file"?j[0]:r}))},B=async()=>{var m;if(t.nameEn)try{const n=sessionStorage.getItem("token"),r=new FormData;if(t.image&&t.image instanceof File)r.append("Image",t.image);else{x.error("Please upload a valid image");return}r.append("Name",t.nameEn),r.append("NameAr",t.nameAr),r.append("Description",t.descriptionEn||""),r.append("DescriptionAr",t.descriptionAr||""),r.append("IsActive",t.status);const c=await E.post("http://test.smartsto0re.shop/api/Brands",r,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n}`}});x.success("Brand added successfully!"),console.log(c.data),g(c.data),d()}catch(n){console.error("❌ Error Response:",((m=n.response)==null?void 0:m.data)||n.message),x.error("Failed to add brand. Check required fields.")}else x.error("Please fill required fields")};return e.jsxs(b,{open:p,onClose:d,children:[e.jsx(y,{children:"Add New Brand"}),e.jsxs(N,{children:[e.jsx(h,{label:"Brand Name Arabic",name:"nameAr",fullWidth:!0,margin:"dense",value:t.nameAr,onChange:l}),e.jsx(h,{label:"Brand Name English",name:"nameEn",fullWidth:!0,margin:"dense",value:t.nameEn,onChange:l}),e.jsx(h,{className:"mt-4",label:"Upload Image",type:"file",name:"image",fullWidth:!0,margin:"dense",onChange:l,InputLabelProps:{shrink:!0}}),e.jsx(h,{label:"Description English",name:"descriptionEn",fullWidth:!0,margin:"dense",multiline:!0,rows:4,value:t.descriptionEn,onChange:l}),e.jsx(h,{label:"Description Arabic",name:"descriptionAr",fullWidth:!0,margin:"dense",multiline:!0,rows:4,value:t.descriptionAr,onChange:l}),e.jsxs(h,{select:!0,label:"Select status",name:"status",fullWidth:!0,margin:"normal",value:t.status,onChange:m=>{const n=m.target.value==="true";i(r=>({...r,status:n}))},SelectProps:{native:!0},children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]}),e.jsxs(k,{children:[e.jsx(v,{onClick:d,children:"Cancel"}),e.jsx(v,{onClick:B,variant:"contained",children:"Add"})]})]})},U=({open:p,onClose:d,onSave:g,initialData:s})=>{var m;const[t,i]=u.useState({nameEn:"",nameAr:"",descriptionEn:"",descriptionAr:"",image:null,status:"true",logoUrl:""});u.useEffect(()=>{p&&s&&i({nameEn:s.name||"",nameAr:s.nameAr||"",descriptionEn:s.description||"",descriptionAr:s.description||"",image:null,status:s.isActive?"true":"false",logoUrl:s.logoUrl||"",id:s.id})},[p,s]);const l=n=>{const{name:r,value:c,type:j,files:f}=n.target;i(j==="file"?A=>({...A,image:f[0]}):A=>({...A,[r]:c}))},B=async()=>{if(!t.nameEn){x.error("Please fill required fields");return}try{const n=new FormData;n.append("Name",t.nameEn),n.append("NameAr",t.nameAr),n.append("Description",t.descriptionEn),n.append("DescriptionAr",t.descriptionAr),n.append("IsActive",t.status==="true"),t.image instanceof File&&n.append("Image",t.image);const r=sessionStorage.getItem("token"),c=await E.put(`http://test.smartsto0re.shop/api/Brands/${t.id}`,n,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"multipart/form-data"}});x.success("Brand updated successfully"),g==null||g(c.data),d()}catch(n){console.error(n),x.error("Failed to update brand")}};return e.jsxs(b,{open:p,onClose:d,fullWidth:!0,maxWidth:"sm",children:[e.jsx(y,{children:"Edit Brand"}),e.jsxs(N,{children:[e.jsx(h,{label:"Brand Name Arabic",name:"nameAr",fullWidth:!0,margin:"dense",value:t.nameAr,onChange:l}),e.jsx(h,{label:"Brand Name English",name:"nameEn",fullWidth:!0,margin:"dense",value:t.nameEn,onChange:l}),((m=t.logoUrl)==null?void 0:m.length)>0&&e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("img",{src:`http://test.smartsto0re.shop${t.logoUrl}`,alt:"Product",style:{width:"100px",borderRadius:"6px"}})}),e.jsx("label",{style:{display:"block",marginTop:"1rem"},children:"Upload New Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:l,style:{marginBottom:"1rem"}}),e.jsx(h,{label:"Description English",name:"descriptionEn",fullWidth:!0,margin:"dense",multiline:!0,rows:4,value:t.descriptionEn,onChange:l}),e.jsx(h,{label:"Description Arabic",name:"descriptionAr",fullWidth:!0,margin:"dense",multiline:!0,rows:4,value:t.descriptionAr,onChange:l}),e.jsxs(h,{select:!0,label:"Select status",name:"status",fullWidth:!0,margin:"normal",value:t.status,onChange:l,SelectProps:{native:!0},children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]}),e.jsxs(k,{children:[e.jsx(v,{onClick:d,children:"Cancel"}),e.jsx(v,{onClick:B,variant:"contained",children:"Save Changes"})]})]})},$=({open:p,onClose:d,onConfirm:g,Brand:s})=>{const t=async()=>{try{const i=sessionStorage.getItem("token"),l=await E.delete(`http://test.smartsto0re.shop/api/Brands/${s.id}`,{headers:{Authorization:`Bearer ${i}`}});x.success("Brand deleted successfully"),g(s.id),d()}catch(i){console.error("❌ Error deleting brand:",i),x.error("Failed to delete brand")}};return e.jsxs(b,{open:p,onClose:d,className:"delete-dialog",children:[e.jsx(y,{children:"Confirm Deletion"}),e.jsxs(N,{children:["Are you sure you want to delete ",e.jsx("strong",{children:(s==null?void 0:s.name)||"this brand"}),"?"]}),e.jsxs(k,{children:[e.jsx(v,{onClick:d,color:"inherit",children:"Cancel"}),e.jsx(v,{onClick:t,color:"error",variant:"contained",children:"Delete"})]})]})};function _(){O();const[p,d]=u.useState(!1),[g,s]=u.useState(!1),[t,i]=u.useState(!1),[l,B]=u.useState(null),[m,n]=u.useState(null),[r,c]=u.useState([]),[j,f]=u.useState(1),A=5,C=Math.ceil(r.length/A),S=j*A,D=S-A,I=r.slice(D,S);u.useEffect(()=>{(async()=>{try{const o=await E.get("http://test.smartsto0re.shop/api/Brands");c(o.data.data)}catch(o){console.error("Error fetching brands:",o)}})()},[]);const w=a=>{c(o=>[...o,a])},W=a=>{c(r.map(o=>o.id===a.id?a:o))},P=a=>{c(o=>o.filter(F=>F.id!==a)),i(!1),B(null)};return console.log(I,"currentBrands"),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"header",children:[e.jsx("p",{children:"Add a New Brands"}),e.jsx(v,{variant:"contained",color:"primary",onClick:()=>d(!0),children:"Add Brand"})]}),e.jsxs("table",{className:"Brands_table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Image"}),e.jsx("th",{children:"NameEn"}),e.jsx("th",{children:"NameAr"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Edit"}),e.jsx("th",{children:"Delete"})]})}),e.jsx("tbody",{children:Array.isArray(r)&&r.slice(0,10).map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{className:"image",src:`http://test.smartsto0re.shop${a.logoUrl}`,alt:a.name})}),e.jsx("td",{children:a.name}),e.jsx("td",{children:a.nameAr}),e.jsx("td",{children:e.jsx("span",{className:a.isActive===!0?"active":"inactive",children:a.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsx("button",{className:"button editButton",onClick:()=>{n(a),s(!0)},children:e.jsx("i",{className:"fas fa-edit"})})}),e.jsx("td",{children:e.jsx("button",{className:"button deleteButton",onClick:()=>{B(a),i(!0)},children:e.jsx("i",{className:"fas fa-trash"})})})]},a.id))})]}),e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"pageBtn",onClick:()=>f(a=>Math.max(a-1,1)),disabled:j===1,children:"<<"}),[...Array(C)].map((a,o)=>e.jsx("button",{className:`pageBtn ${j===o+1?"pageBtnActive":"pageBtnInactive"}`,onClick:()=>f(o+1),children:o+1},o)),e.jsx("button",{className:"pageBtn",onClick:()=>f(a=>Math.min(a+1,C)),disabled:j===C,children:">"})]}),e.jsx(T,{open:p,onClose:()=>d(!1),onSave:w}),e.jsx(U,{open:g,onClose:()=>s(!1),onSave:W,initialData:m}),e.jsx($,{open:t,className:"delete-dialog",onClose:()=>i(!1),onConfirm:P,Brand:l})]})}export{_ as default};
